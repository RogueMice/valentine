<!doctype html>
<html lang="vi">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>üíñ Happy Valentine's Day ‚Äî For You</title>
  <meta name="description" content="A special Valentine's Day message just for you, with love and care." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Quicksand:wght@300;400;500;600;700&display=swap"
    rel="stylesheet">
  <style>
    /* ===== DESIGN TOKENS ===== */
    :root {
      --pink-50: #fff0f6;
      --pink-100: #fce4f0;
      --pink-200: #f9c8e0;
      --pink-300: #f49ac2;
      --pink-400: #ec6fa0;
      --pink-500: #e94080;
      --pink-600: #d72a6e;
      --blue-50: #eff6ff;
      --blue-100: #dbeafe;
      --blue-200: #bfdbfe;
      --blue-300: #93c5fd;
      --blue-400: #60a5fa;
      --blue-500: #3b82f6;
      --glass-bg: rgba(255, 255, 255, 0.18);
      --glass-border: rgba(255, 255, 255, 0.35);
      --glass-shadow: 0 8px 32px rgba(233, 64, 128, 0.12);
      --text-primary: #2d1b3d;
      --text-secondary: #6b5a7a;
      --radius-lg: 24px;
      --radius-xl: 32px;
    }

    /* ===== RESET & BASE ===== */
    *,
    *::before,
    *::after {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html,
    body {
      height: 100vh;
      height: 100dvh;
      scroll-behavior: smooth;
    }

    body {
      font-family: 'Quicksand', system-ui, -apple-system, sans-serif;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, var(--pink-100) 0%, var(--blue-100) 40%, var(--pink-50) 70%, var(--blue-50) 100%);
      background-size: 400% 400%;
      animation: gradientShift 12s ease infinite;
    }

    @keyframes gradientShift {
      0% {
        background-position: 0% 50%;
      }

      50% {
        background-position: 100% 50%;
      }

      100% {
        background-position: 0% 50%;
      }
    }

    /* ===== FLOATING HEARTS BACKGROUND ===== */
    .floating-hearts {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 50;
      overflow: hidden;
    }

    .floating-hearts span {
      position: absolute;
      bottom: -60px;
      font-size: 20px;
      opacity: 0;
      animation: floatUp linear infinite;
    }

    @keyframes floatUp {
      0% {
        transform: translateY(0) rotate(0deg) scale(1);
        opacity: 0;
      }

      10% {
        opacity: 0.7;
      }

      90% {
        opacity: 0.5;
      }

      100% {
        transform: translateY(-110vh) rotate(720deg) scale(0.4);
        opacity: 0;
      }
    }

    /* ===== PARTICLE CANVAS ===== */
    #particles {
      position: fixed;
      inset: 0;
      z-index: 0;
      pointer-events: none;
    }

    /* ===== MAIN CONTAINER (full page) ===== */
    .phone {
      position: fixed;
      inset: 0;
      z-index: 10;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .phone::before {
      content: '';
      position: absolute;
      inset: 0;
      background-image: url('https://images.unsplash.com/photo-1518199266791-5375a83190b7?q=85&w=800&auto=format&fit=crop');
      background-size: cover;
      background-position: center;
      opacity: 0.35;
      z-index: -2;
    }

    .phone::after {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(180deg,
          rgba(255, 255, 255, 0.6) 0%,
          rgba(255, 240, 246, 0.5) 40%,
          rgba(219, 234, 254, 0.55) 100%);
      z-index: -1;
    }

    /* ===== COVER IMAGE ===== */
    .cover-wrapper {
      position: relative;
      width: 100%;
      padding: 12px 16px 0;
    }

    .cover {
      width: 100%;
      height: 40vh;
      height: 40dvh;
      max-height: 340px;
      border-radius: 20px;
      overflow: hidden;
      position: relative;
      cursor: pointer;
      box-shadow: 0 12px 40px rgba(233, 64, 128, 0.18);
      transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    .cover:hover {
      transform: scale(1.02);
    }

    .cover img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      transition: transform 0.6s ease;
    }

    .cover:hover img {
      transform: scale(1.08);
    }

    .cover::after {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(180deg, transparent 40%, rgba(233, 64, 128, 0.15) 100%);
      pointer-events: none;
    }

    /* Badge */
    .badge {
      position: absolute;
      left: 14px;
      top: 14px;
      z-index: 5;
      background: rgba(255, 255, 255, 0.85);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      padding: 8px 16px;
      border-radius: 999px;
      font-weight: 700;
      color: var(--pink-500);
      font-size: 13px;
      box-shadow: 0 4px 16px rgba(233, 64, 128, 0.12);
      border: 1px solid rgba(255, 255, 255, 0.5);
      animation: badgePulse 2.5s ease-in-out infinite;
    }

    @keyframes badgePulse {

      0%,
      100% {
        box-shadow: 0 4px 16px rgba(233, 64, 128, 0.12);
      }

      50% {
        box-shadow: 0 4px 24px rgba(233, 64, 128, 0.3);
      }
    }

    /* ===== CONTENT ===== */
    .content {
      padding: 16px 24px 24px;
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
    }

    /* Heart icon */
    .heart-icon {
      font-size: 40px;
      display: inline-block;
      transform-origin: center;
      animation: heartbeat 1.2s ease-in-out infinite;
      filter: drop-shadow(0 4px 12px rgba(233, 64, 128, 0.3));
    }

    @keyframes heartbeat {
      0% {
        transform: scale(1);
      }

      15% {
        transform: scale(1.15);
      }

      30% {
        transform: scale(1);
      }

      45% {
        transform: scale(1.1);
      }

      60% {
        transform: scale(1);
      }
    }

    /* Title */
    .title {
      font-family: 'Dancing Script', cursive;
      font-size: 32px;
      font-weight: 700;
      background: linear-gradient(135deg, var(--pink-500), var(--blue-400), var(--pink-400));
      background-size: 200% 200%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: textShimmer 4s ease infinite;
      margin-bottom: 4px;
    }

    @keyframes textShimmer {
      0% {
        background-position: 0% 50%;
      }

      50% {
        background-position: 100% 50%;
      }

      100% {
        background-position: 0% 50%;
      }
    }

    /* Typing lines */
    .lines {
      display: flex;
      flex-direction: column;
      gap: 6px;
      align-items: center;
      min-height: 56px;
    }

    .line {
      font-size: 16px;
      color: var(--text-secondary);
      font-weight: 500;
      line-height: 1.5;
      max-width: 90%;
    }

    .typing-cursor::after {
      content: '|';
      animation: blink 0.8s step-end infinite;
      color: var(--pink-400);
      font-weight: 300;
    }

    @keyframes blink {
      50% {
        opacity: 0;
      }
    }

    /* ===== BUTTONS ===== */
    .controls {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      justify-content: center;
      margin-top: 12px;
    }

    .btn {
      position: relative;
      border: none;
      cursor: pointer;
      padding: 12px 24px;
      border-radius: 999px;
      font-family: 'Quicksand', sans-serif;
      font-weight: 700;
      font-size: 15px;
      transition: all 0.35s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      overflow: hidden;
    }

    .btn::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.3), rgba(255, 255, 255, 0));
      opacity: 0;
      transition: opacity 0.3s;
    }

    .btn:hover::before {
      opacity: 1;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--pink-400), var(--pink-500), var(--blue-400));
      background-size: 200% 200%;
      color: white;
      box-shadow: 0 6px 20px rgba(233, 64, 128, 0.25);
      animation: btnGradient 5s ease infinite;
    }

    @keyframes btnGradient {
      0% {
        background-position: 0% 50%;
      }

      50% {
        background-position: 100% 50%;
      }

      100% {
        background-position: 0% 50%;
      }
    }

    .btn-primary:hover {
      transform: translateY(-3px) scale(1.05);
      box-shadow: 0 10px 30px rgba(233, 64, 128, 0.35);
    }

    .btn-primary:active {
      transform: translateY(0) scale(0.98);
    }

    .btn-glass {
      background: var(--glass-bg);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      color: var(--text-primary);
      border: 1.5px solid var(--glass-border);
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);
    }

    .btn-glass:hover {
      transform: translateY(-3px);
      background: rgba(255, 255, 255, 0.35);
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
    }

    /* Music button active state */
    .btn-music.playing {
      background: linear-gradient(135deg, var(--blue-400), var(--pink-400));
      color: white;
      border-color: transparent;
      box-shadow: 0 6px 20px rgba(59, 130, 246, 0.25);
    }

    /* Music visualizer bars */
    .music-bars {
      display: inline-flex;
      gap: 2px;
      align-items: flex-end;
      height: 16px;
      margin-right: 6px;
      vertical-align: middle;
    }

    .music-bars span {
      width: 3px;
      background: currentColor;
      border-radius: 2px;
      animation: none;
    }

    .playing .music-bars span {
      animation: barBounce 0.6s ease-in-out infinite alternate;
    }

    .music-bars span:nth-child(1) {
      height: 6px;
      animation-delay: 0s;
    }

    .music-bars span:nth-child(2) {
      height: 10px;
      animation-delay: 0.15s;
    }

    .music-bars span:nth-child(3) {
      height: 14px;
      animation-delay: 0.3s;
    }

    .music-bars span:nth-child(4) {
      height: 8px;
      animation-delay: 0.45s;
    }

    @keyframes barBounce {
      0% {
        height: 4px;
      }

      100% {
        height: 16px;
      }
    }

    /* ===== REVEAL CARD (glass modal) ===== */
    .overlay {
      position: fixed;
      inset: 0;
      z-index: 100;
      background: rgba(45, 27, 61, 0.4);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      display: flex;
      align-items: center;
      justify-content: center;
      padding-bottom: 30vh;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.4s ease;
    }

    .overlay.show {
      opacity: 1;
      pointer-events: all;
    }

    .reveal-card {
      width: 88%;
      max-width: 360px;
      background: rgba(255, 255, 255, 0.75);
      backdrop-filter: blur(24px);
      -webkit-backdrop-filter: blur(24px);
      border: 1.5px solid rgba(255, 255, 255, 0.5);
      border-radius: var(--radius-lg);
      padding: 32px 24px;
      box-shadow: 0 24px 60px rgba(233, 64, 128, 0.18), 0 8px 24px rgba(59, 130, 246, 0.1);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 16px;
      transform: scale(0.9) translateY(20px);
      opacity: 0;
      transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    .overlay.show .reveal-card {
      transform: scale(1) translateY(0);
      opacity: 1;
    }

    .reveal-card h2 {
      font-family: 'Dancing Script', cursive;
      font-size: 36px;
      font-weight: 700;
      background: linear-gradient(135deg, var(--pink-500), var(--blue-400));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .reveal-card .card-heart {
      font-size: 48px;
      animation: heartbeat 1.2s ease-in-out infinite;
      filter: drop-shadow(0 4px 12px rgba(233, 64, 128, 0.3));
    }

    .reveal-card p {
      color: var(--text-secondary);
      font-size: 16px;
      line-height: 1.7;
      text-align: center;
      font-weight: 500;
    }

    /* ===== CONFETTI CANVAS ===== */
    #confetti {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 120;
    }

    /* ===== SPLASH / INTRO SCREEN ===== */
    .splash {
      position: fixed;
      inset: 0;
      z-index: 200;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding-bottom: 20vh;
      padding-top: env(safe-area-inset-top, 0);
      background: linear-gradient(135deg, #fce4f0 0%, #dbeafe 50%, #fff0f6 100%);
      background-size: 300% 300%;
      animation: gradientShift 8s ease infinite;
      cursor: pointer;
      transition: opacity 0.8s ease, transform 0.8s ease;
    }

    .splash.hidden {
      opacity: 0;
      pointer-events: none;
      transform: scale(1.1);
    }

    .splash-hearts {
      position: absolute;
      inset: 0;
      overflow: hidden;
      pointer-events: none;
    }

    .splash-hearts span {
      position: absolute;
      bottom: -40px;
      animation: floatUp linear infinite;
    }

    .splash-content {
      text-align: center;
      z-index: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 16px;
    }

    .splash-emoji {
      font-size: 80px;
      animation: heartbeat 1.2s ease-in-out infinite;
      filter: drop-shadow(0 8px 24px rgba(233, 64, 128, 0.3));
    }

    .splash-title {
      font-family: 'Dancing Script', cursive;
      font-size: 42px;
      font-weight: 700;
      background: linear-gradient(135deg, var(--pink-500), var(--blue-400));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .splash-sub {
      color: var(--text-secondary);
      font-size: 16px;
      font-weight: 500;
      opacity: 0.8;
    }

    .splash-btn {
      margin-top: 12px;
      padding: 16px 48px;
      border: none;
      border-radius: 999px;
      font-family: 'Quicksand', sans-serif;
      font-size: 18px;
      font-weight: 700;
      color: white;
      background: linear-gradient(135deg, var(--pink-400), var(--pink-500), var(--blue-400));
      background-size: 200% 200%;
      animation: btnGradient 4s ease infinite;
      cursor: pointer;
      box-shadow: 0 8px 30px rgba(233, 64, 128, 0.3);
      transition: transform 0.3s, box-shadow 0.3s;
    }

    .splash-btn:hover {
      transform: translateY(-4px) scale(1.05);
      box-shadow: 0 14px 40px rgba(233, 64, 128, 0.4);
    }

    .splash-btn:active {
      transform: scale(0.97);
    }

    .splash-hint {
      margin-top: 8px;
      font-size: 13px;
      color: var(--text-secondary);
      opacity: 0.5;
      animation: blink 1.5s ease-in-out infinite;
    }


    /* ===== RESPONSIVE ===== */
    @media (max-width: 440px) {
      .cover {
        height: 30vh;
        height: 30dvh;
      }

      .title {
        font-size: 26px;
      }

      .heart-icon {
        font-size: 40px;
      }

      .content {
        padding: 8px 16px 12px;
        gap: 4px;
      }

      .splash-title {
        font-size: 34px;
      }

      .splash-emoji {
        font-size: 64px;
      }
    }

    @media (max-height: 700px) {
      .cover {
        height: 25vh;
        height: 25dvh;
      }

      .heart-icon {
        font-size: 36px;
        margin-top: 0;
      }

      .title {
        font-size: 24px;
      }

      .content {
        gap: 2px;
        padding: 4px 16px 8px;
      }

      .lines {
        min-height: 40px;
      }

      .controls {
        margin-top: 6px;
      }
    }

    /* ===== ENTRANCE ANIMATIONS ===== */
    .fade-up {
      opacity: 0;
      transform: translateY(24px);
      animation: fadeUp 0.8s ease forwards;
    }

    @keyframes fadeUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .delay-1 {
      animation-delay: 0.2s;
    }

    .delay-2 {
      animation-delay: 0.5s;
    }

    .delay-3 {
      animation-delay: 0.8s;
    }

    .delay-4 {
      animation-delay: 1.1s;
    }

    .delay-5 {
      animation-delay: 1.4s;
    }

    /* ===== SPARKLE DOTS ===== */
    .sparkle-container {
      position: fixed;
      inset: 0;
      pointer-events: none;
      overflow: hidden;
      z-index: 1;
    }

    .sparkle {
      position: absolute;
      width: 4px;
      height: 4px;
      background: white;
      border-radius: 50%;
      animation: sparkle 3s ease-in-out infinite;
    }

    @keyframes sparkle {

      0%,
      100% {
        opacity: 0;
        transform: scale(0);
      }

      50% {
        opacity: 1;
        transform: scale(1);
      }
    }
  </style>
</head>

<body>

  <!-- ===== SPLASH INTRO SCREEN ===== -->
  <div class="splash" id="splash">
    <div class="splash-hearts" id="splashHearts"></div>
    <div class="splash-content">
      <div class="splash-emoji">üíù</div>
      <div class="splash-title">Happy Valentine's Day</div>
      <div class="splash-sub">B·∫°n c√≥ m·ªôt l√° th∆∞ ƒë·∫∑c bi·ªát...</div>
      <button class="splash-btn" id="enterBtn">üíå M·ªü th∆∞</button>
      <div class="splash-hint">Nh·∫•n ƒë·ªÉ m·ªü üéµ</div>
    </div>
  </div>

  <!-- PARTICLE BACKGROUND -->
  <canvas id="particles"></canvas>

  <!-- FLOATING HEARTS -->
  <div class="floating-hearts" id="floatingHearts"></div>

  <!-- MAIN CARD -->
  <div class="phone">
    <div class="sparkle-container" id="sparkles"></div>

    <!-- Cover Image -->
    <div class="cover-wrapper fade-up">
      <div class="cover" id="coverArea">
        <img src="https://images.unsplash.com/photo-1518199266791-5375a83190b7?q=85&w=800&auto=format&fit=crop"
          alt="Valentine roses" id="coverImg">
        <div class="badge">‚ú¶ Happy Valentine's Day ‚ô•</div>
      </div>
    </div>

    <!-- Content -->
    <div class="content">
      <div class="heart-icon fade-up delay-1">üíò</div>

      <h1 class="title fade-up delay-2">For Someone Special</h1>

      <div class="lines fade-up delay-3">
        <div class="line" id="line1"></div>
        <div class="line" id="line2"></div>
      </div>

      <!-- Controls -->
      <div class="controls fade-up delay-4">
        <button class="btn btn-primary" id="revealBtn">
          üíå Open Letter
        </button>
        <button class="btn btn-glass btn-music" id="musicBtn">
          <span class="music-bars"><span></span><span></span><span></span><span></span></span>
          Play Music
        </button>
      </div>
    </div>
  </div>

  <!-- REVEAL OVERLAY -->
  <div class="overlay" id="overlay">
    <div class="reveal-card">
      <div class="card-heart">üíñ</div>
      <h2>For You</h2>
      <p id="finalMsg">
        You make my world brighter every single day.<br>
        I'm so lucky to have you in my life.<br>
        Every moment with you is a gift I treasure. üåπ
      </p>
      <button class="btn btn-primary" id="closeCard">Close üíï</button>
    </div>
  </div>

  <!-- CONFETTI CANVAS -->
  <canvas id="confetti"></canvas>

  <!-- AUDIO -->
  <audio id="bgm" loop src="music.mp3"></audio>

  <script>
    // ===== FLOATING HEARTS =====
    (function createFloatingHearts() {
      const container = document.getElementById('floatingHearts');
      const hearts = ['üíï', 'üíñ', 'üíó', 'üíò', 'üíù', '‚ô•', 'ü©∑', 'ü©µ', '‚ú®', 'üå∏'];
      for (let i = 0; i < 25; i++) {
        const span = document.createElement('span');
        span.textContent = hearts[Math.floor(Math.random() * hearts.length)];
        span.style.left = Math.random() * 100 + '%';
        span.style.fontSize = (14 + Math.random() * 20) + 'px';
        span.style.animationDuration = (8 + Math.random() * 12) + 's';
        span.style.animationDelay = (Math.random() * 10) + 's';
        container.appendChild(span);
      }
    })();

    // ===== SPARKLE DOTS =====
    (function createSparkles() {
      const container = document.getElementById('sparkles');
      for (let i = 0; i < 20; i++) {
        const dot = document.createElement('div');
        dot.className = 'sparkle';
        dot.style.left = Math.random() * 100 + '%';
        dot.style.top = Math.random() * 100 + '%';
        dot.style.width = dot.style.height = (2 + Math.random() * 4) + 'px';
        dot.style.animationDelay = (Math.random() * 3) + 's';
        dot.style.animationDuration = (2 + Math.random() * 3) + 's';
        container.appendChild(dot);
      }
    })();

    // ===== PARTICLE BACKGROUND =====
    (function initParticles() {
      const c = document.getElementById('particles');
      const ctx = c.getContext('2d');
      let W, H;
      const dots = [];
      const COUNT = 60;

      function resize() {
        W = c.width = window.innerWidth;
        H = c.height = window.innerHeight;
      }
      resize();
      window.addEventListener('resize', resize);

      for (let i = 0; i < COUNT; i++) {
        dots.push({
          x: Math.random() * W,
          y: Math.random() * H,
          r: Math.random() * 2.5 + 0.5,
          vx: (Math.random() - 0.5) * 0.4,
          vy: (Math.random() - 0.5) * 0.4,
          color: Math.random() > 0.5
            ? `hsla(340, 82%, ${70 + Math.random() * 20}%, 0.4)`
            : `hsla(217, 91%, ${70 + Math.random() * 20}%, 0.35)`
        });
      }

      function draw() {
        ctx.clearRect(0, 0, W, H);
        dots.forEach((d, i) => {
          d.x += d.vx; d.y += d.vy;
          if (d.x < 0 || d.x > W) d.vx *= -1;
          if (d.y < 0 || d.y > H) d.vy *= -1;

          ctx.beginPath();
          ctx.arc(d.x, d.y, d.r, 0, Math.PI * 2);
          ctx.fillStyle = d.color;
          ctx.fill();

          // Connect nearby dots
          for (let j = i + 1; j < dots.length; j++) {
            const dx = d.x - dots[j].x;
            const dy = d.y - dots[j].y;
            const dist = Math.sqrt(dx * dx + dy * dy);
            if (dist < 120) {
              ctx.beginPath();
              ctx.moveTo(d.x, d.y);
              ctx.lineTo(dots[j].x, dots[j].y);
              ctx.strokeStyle = `hsla(340, 70%, 75%, ${0.15 * (1 - dist / 120)})`;
              ctx.lineWidth = 0.5;
              ctx.stroke();
            }
          }
        });
        requestAnimationFrame(draw);
      }
      draw();
    })();

    // ===== TYPEWRITER EFFECT =====
    const messages = [
      "Every moment with you feels like magic... ‚ú®",
      "Tap below to see something special üíå"
    ];

    function typeLine(el, text, speed = 38) {
      return new Promise(resolve => {
        el.textContent = '';
        el.classList.add('typing-cursor');
        let i = 0;
        const timer = setInterval(() => {
          el.textContent += text.charAt(i++);
          if (i >= text.length) {
            clearInterval(timer);
            el.classList.remove('typing-cursor');
            resolve();
          }
        }, speed);
      });
    }

    (async function startTyping() {
      await new Promise(r => setTimeout(r, 1200));
      await typeLine(document.getElementById('line1'), messages[0], 34);
      await new Promise(r => setTimeout(r, 400));
      await typeLine(document.getElementById('line2'), messages[1], 32);
    })();

    // ===== CONFETTI =====
    const confettiCanvas = document.getElementById('confetti');
    const cctx = confettiCanvas.getContext('2d');

    function resizeConfetti() {
      confettiCanvas.width = window.innerWidth;
      confettiCanvas.height = window.innerHeight;
    }
    resizeConfetti();
    window.addEventListener('resize', resizeConfetti);

    function launchConfetti(count = 120) {
      const W = confettiCanvas.width, H = confettiCanvas.height;
      const parts = [];
      const colors = ['#ec6fa0', '#60a5fa', '#f49ac2', '#93c5fd', '#ffd166', '#ff9fb1', '#bfdbfe', '#fce4f0'];
      const shapes = ['rect', 'circle', 'heart'];

      for (let i = 0; i < count; i++) {
        const angle = (Math.random() * Math.PI * 2);
        const speed = 4 + Math.random() * 8;
        parts.push({
          x: W / 2 + (Math.random() - 0.5) * 200,
          y: H / 2,
          s: Math.random() * 8 + 4,
          vx: Math.cos(angle) * speed,
          vy: Math.sin(angle) * speed - 4,
          r: Math.random() * 360,
          rv: (Math.random() - 0.5) * 12,
          c: colors[Math.floor(Math.random() * colors.length)],
          shape: shapes[Math.floor(Math.random() * shapes.length)],
          life: 1
        });
      }

      let t = 0;
      function anim() {
        t++;
        cctx.clearRect(0, 0, W, H);
        let alive = false;
        parts.forEach(p => {
          p.x += p.vx;
          p.y += p.vy;
          p.vy += 0.18;
          p.vx *= 0.99;
          p.r += p.rv;
          p.life -= 0.006;
          if (p.life <= 0) return;
          alive = true;

          cctx.save();
          cctx.translate(p.x, p.y);
          cctx.rotate(p.r * Math.PI / 180);
          cctx.globalAlpha = Math.max(0, p.life);
          cctx.fillStyle = p.c;

          if (p.shape === 'circle') {
            cctx.beginPath();
            cctx.arc(0, 0, p.s / 2, 0, Math.PI * 2);
            cctx.fill();
          } else if (p.shape === 'heart') {
            const hs = p.s * 0.5;
            cctx.beginPath();
            cctx.moveTo(0, hs);
            cctx.bezierCurveTo(-hs * 2, -hs, -hs * 0.5, -hs * 2.5, 0, -hs);
            cctx.bezierCurveTo(hs * 0.5, -hs * 2.5, hs * 2, -hs, 0, hs);
            cctx.fill();
          } else {
            cctx.fillRect(-p.s / 2, -p.s / 2, p.s, p.s * 0.6);
          }
          cctx.restore();
        });
        if (alive) requestAnimationFrame(anim);
        else cctx.clearRect(0, 0, W, H);
      }
      anim();
    }

    // ===== REVEAL CARD =====
    const overlay = document.getElementById('overlay');
    const revealBtn = document.getElementById('revealBtn');
    const closeCard = document.getElementById('closeCard');
    const coverArea = document.getElementById('coverArea');

    function openCard() {
      overlay.classList.add('show');
      launchConfetti(150);
    }

    revealBtn.addEventListener('click', openCard);
    coverArea.addEventListener('click', openCard);

    closeCard.addEventListener('click', () => {
      overlay.classList.remove('show');
    });

    overlay.addEventListener('click', (e) => {
      if (e.target === overlay) overlay.classList.remove('show');
    });

    // ===== SPLASH SCREEN =====
    const splash = document.getElementById('splash');
    const enterBtn = document.getElementById('enterBtn');

    // Create splash floating hearts
    (function createSplashHearts() {
      const container = document.getElementById('splashHearts');
      const emojis = ['üíï', 'üíñ', 'üíó', 'üíò', 'ü©∑', 'ü©µ', '‚ú®', 'üå∏', 'üíê', 'ü¶ã'];
      for (let i = 0; i < 30; i++) {
        const span = document.createElement('span');
        span.textContent = emojis[Math.floor(Math.random() * emojis.length)];
        span.style.left = Math.random() * 100 + '%';
        span.style.fontSize = (16 + Math.random() * 24) + 'px';
        span.style.animationDuration = (6 + Math.random() * 10) + 's';
        span.style.animationDelay = (Math.random() * 8) + 's';
        span.style.opacity = '0';
        container.appendChild(span);
      }
    })();

    // ===== MUSIC =====
    const musicBtn = document.getElementById('musicBtn');
    const bgm = document.getElementById('bgm');

    function startMusic() {
      bgm.play().then(() => {
        musicBtn.classList.add('playing');
        musicBtn.childNodes[musicBtn.childNodes.length - 1].textContent = ' Pause';
      }).catch(() => { });
    }

    function stopMusic() {
      bgm.pause();
      musicBtn.classList.remove('playing');
      musicBtn.childNodes[musicBtn.childNodes.length - 1].textContent = ' Play Music';
    }

    // Enter button: dismiss splash + auto-play music
    enterBtn.addEventListener('click', () => {
      splash.classList.add('hidden');
      startMusic(); // guaranteed to work: triggered by direct user click
    });

    musicBtn.addEventListener('click', () => {
      if (bgm.paused) {
        startMusic();
      } else {
        stopMusic();
      }
    });
  </script>
</body>

</html>